From 29e95084ceb8fe8c34d184b7270febe7bc9f13f1 Mon Sep 17 00:00:00 2001
From: Christian Biermann <bie@iesy.com>
Date: Tue, 16 Jan 2024 13:35:19 +0100
Subject: [PATCH 1/1] drivers: rtc: adopt max31343 driver to new kernel api

---
 drivers/rtc/rtc-max31343.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/rtc/rtc-max31343.c b/drivers/rtc/rtc-max31343.c
index b86a5fc81d98..f7f548163d5c 100644
--- a/drivers/rtc/rtc-max31343.c
+++ b/drivers/rtc/rtc-max31343.c
@@ -456,12 +456,12 @@ max31343_probe(struct i2c_client *client, const struct i2c_device_id *id)
 	max31343->rtc->range_min = RTC_TIMESTAMP_BEGIN_2000;
 	max31343->rtc->range_max = RTC_TIMESTAMP_END_2199;
 	max31343->rtc->ops = &max31343_rtc_ops;
-	ret = rtc_register_device(max31343->rtc);
+	ret = devm_rtc_register_device(max31343->rtc);
 	if (ret)
 		return ret;
 
 	nvmem_cfg.priv = max31343->regmap;
-	rtc_nvmem_register(max31343->rtc, &nvmem_cfg);
+	devm_rtc_nvmem_register(max31343->rtc, &nvmem_cfg);
 	max31343_hwmon_register(&client->dev);
 	return 0;
 }
-- 
2.30.2

