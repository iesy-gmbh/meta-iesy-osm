From 669a7e876a04fabfd3e21c69120c0ddbac44f8d8 Mon Sep 17 00:00:00 2001
From: Dominik Poggel <pog@iesy.com>
Date: Thu, 8 Dec 2022 09:53:19 +0100
Subject: [PATCH 2/3] arm64: imx8mm: config PMIC

---
 arch/arm/dts/imx8mm-evk-u-boot.dtsi | 4 ++--
 arch/arm/dts/imx8mm-evk.dts         | 4 ++--
 board/freescale/imx8mm_evk/spl.c    | 4 ++--
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/arch/arm/dts/imx8mm-evk-u-boot.dtsi b/arch/arm/dts/imx8mm-evk-u-boot.dtsi
index 827dc9e06f..624c58db85 100644
--- a/arch/arm/dts/imx8mm-evk-u-boot.dtsi
+++ b/arch/arm/dts/imx8mm-evk-u-boot.dtsi
@@ -144,11 +144,11 @@
 	u-boot,dm-spl;
 };
 
-&{/soc@0/bus@30800000/i2c@30a20000/pmic@4b} {
+&{/soc@0/bus@30800000/i2c@30a20000/pmic@25} {
 	u-boot,dm-spl;
 };
 
-&{/soc@0/bus@30800000/i2c@30a20000/pmic@4b/regulators} {
+&{/soc@0/bus@30800000/i2c@30a20000/pmic@25/regulators} {
 	u-boot,dm-spl;
 };
 
diff --git a/arch/arm/dts/imx8mm-evk.dts b/arch/arm/dts/imx8mm-evk.dts
index aac02abb93..8814c4b96a 100644
--- a/arch/arm/dts/imx8mm-evk.dts
+++ b/arch/arm/dts/imx8mm-evk.dts
@@ -146,9 +146,9 @@
 	scl-gpios = <&gpio5 14 GPIO_ACTIVE_HIGH>;
 	sda-gpios = <&gpio5 15 GPIO_ACTIVE_HIGH>;
 
-	pmic@4b {
+	pmic@25 {
 		compatible = "nxp,pca9450a";
-		reg = <0x4b>;
+		reg = <0x25>;
 		pinctrl-0 = <&pinctrl_pmic>;
 		interrupt-parent = <&gpio1>;
 		interrupts = <3 GPIO_ACTIVE_LOW>;
diff --git a/board/freescale/imx8mm_evk/spl.c b/board/freescale/imx8mm_evk/spl.c
index b9ca6e8786..f9df5d46e9 100644
--- a/board/freescale/imx8mm_evk/spl.c
+++ b/board/freescale/imx8mm_evk/spl.c
@@ -186,11 +186,11 @@ int power_init_board(void)
 	struct pmic *p;
 	int ret;
 
-	ret = power_pca9450a_init(I2C_PMIC);
+	ret = power_pca9450b_init(I2C_PMIC);
 	if (ret)
 		printf("power init failed");
 
-	p = pmic_get("PCA9450A");
+	p = pmic_get("PCA9450");
 	pmic_probe(p);
 
 	/* BUCKxOUT_DVS0/1 control BUCK123 output */
-- 
2.30.2

